<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ứng dụng Flashcard</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the flashcard */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .flashcard-container {
            perspective: 1000px; /* For 3D flip effect */
            width: 100%;
            max-width: 600px; /* Max width for desktop */
            min-height: 300px; /* Minimum height for the card */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .flashcard {
            width: 100%;
            height: 300px; /* Fixed height for the card */
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            border-radius: 1.5rem; /* Rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Soft shadow */
            background-color: #ffffff; /* White background for card */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* Hide the back face when not flipped */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            border-radius: 1.5rem;
        }

        .flashcard-front {
            background-color: #6366f1; /* Indigo 500 */
            color: white;
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .flashcard-back {
            background-color: #ffffff;
            color: #333;
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: left; /* Align text to left for better readability */
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .flashcard-back p {
            margin-bottom: 0.5rem;
            width: 100%; /* Ensure paragraphs take full width */
        }

        .flashcard-back .vocabulary {
            font-size: 1.5rem;
            font-weight: bold;
            color: #4f46e5; /* Indigo 600 */
            margin-bottom: 0.5rem;
        }

        .flashcard-back .pronunciation {
            font-style: italic;
            color: #6b7280; /* Gray 500 */
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .flashcard-back .example {
            font-size: 0.95rem;
            color: #4b5563; /* Gray 700 */
            border-left: 3px solid #a5b4fc; /* Light indigo border */
            padding-left: 10px;
            margin-top: 1rem;
        }

        .navigation-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
            justify-content: center;
        }

        .nav-button {
            background-color: #4f46e5; /* Indigo 600 */
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 0.75rem;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border: none;
            outline: none;
        }

        .nav-button:hover {
            background-color: #4338ca; /* Indigo 700 */
            transform: translateY(-2px);
        }

        .nav-button:active {
            background-color: #3730a3; /* Indigo 800 */
            transform: translateY(0);
        }

        .card-counter {
            margin-top: 1.5rem;
            font-size: 1.1rem;
            color: #4b5563;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .flashcard {
                height: 280px; /* Slightly smaller height on mobile */
            }
            .flashcard-front {
                font-size: 1.6rem;
            }
            .flashcard-back .vocabulary {
                font-size: 1.3rem;
            }
            .flashcard-back .pronunciation {
                font-size: 0.9rem;
            }
            .flashcard-back .example {
                font-size: 0.85rem;
            }
            .navigation-buttons {
                flex-direction: row; /* Keep row direction, but allow wrap */
                gap: 0.8rem;
            }
            .nav-button {
                padding: 0.7rem 1.2rem;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .flashcard {
                height: 250px; /* Even smaller height on very small screens */
            }
            .flashcard-front {
                font-size: 1.4rem;
            }
            .flashcard-back .vocabulary {
                font-size: 1.2rem;
            }
            .flashcard-back .pronunciation {
                font-size: 0.85rem;
            }
            .flashcard-back .example {
                font-size: 0.8rem;
            }
            .navigation-buttons {
                flex-direction: column; /* Stack buttons vertically on very small screens */
                gap: 0.6rem;
            }
        }
    </style>
</head>
<body>
    <div class="flashcard-container">
        <div id="flashcard" class="flashcard cursor-pointer">
            <div id="flashcard-front" class="flashcard-face flashcard-front rounded-2xl">
                <!-- Vietnamese meaning will be displayed here -->
            </div>
            <div id="flashcard-back" class="flashcard-face flashcard-back rounded-2xl">
                <!-- English word, pronunciation, example will be displayed here -->
            </div>
        </div>

        <div class="card-counter" id="card-counter">
            <!-- Card counter will be displayed here -->
        </div>

        <div class="navigation-buttons">
            <button id="prev-button" class="nav-button">Thẻ trước</button>
            <button id="shuffle-button" class="nav-button">Trộn thẻ</button>
            <button id="next-button" class="nav-button">Thẻ sau</button>
        </div>
    </div>

    <script>
        // Dữ liệu từ vựng
        const vocabulary = [
            {
                vietnameseMeaning: "Hoàn toàn, toàn bộ",
                word: "altogether",
                pronunciation: "/ˌɔːltəˈɡeðər/",
                exampleStory: "By the end of the game, Gwen forgot altogether that she hadn’t wanted to play.",
                exampleCommon: "Hoàn toàn, tổng cộng."
            },
            {
                vietnameseMeaning: "Gắn kết, kết nối",
                word: "bind",
                pronunciation: "/baɪnd/",
                exampleStory: "The victory bound Gwen’s team together.",
                exampleCommon: "Buộc, ràng buộc, gắn kết."
            },
            {
                vietnameseMeaning: "Vết bầm tím",
                word: "bruise",
                pronunciation: "/bruːz/",
                exampleStory: "She had scraped her knee and had a small bruise.",
                exampleCommon: "Vết bầm tím (trên da), vết thâm (trên trái cây)."
            },
            {
                vietnameseMeaning: "Phong tục, thông lệ",
                word: "custom",
                pronunciation: "/ˈkʌstəm/",
                exampleStory: "Coach Peeves said, “Today, we’re playing basketball. The custom is to let you choose your own teams.\".",
                exampleCommon: "Phong tục, tập quán, thói quen."
            },
            {
                vietnameseMeaning: "Không vâng lời",
                word: "disobedient",
                pronunciation: "/ˌdɪsəˈbiːdiənt/",
                exampleStory: "“Gwen, don’t be disobedient. I don’t want to hear any more negative comments from you.\".",
                exampleCommon: "Không vâng lời, bất tuân."
            },
            {
                vietnameseMeaning: "Dự đoán, nhìn thấy trước",
                word: "foresee",
                pronunciation: "/fɔːrˈsiː/",
                exampleStory: "The coach could foresee Gwen’s excuses.",
                exampleCommon: "Dự đoán, thấy trước."
            },
            {
                vietnameseMeaning: "Nhìn thoáng qua",
                word: "glimpse",
                pronunciation: "/ɡlɪmps/",
                exampleStory: "Gwen glimpsed at her teammates.",
                exampleCommon: "Nhìn thoáng qua, thoáng thấy."
            },
            {
                vietnameseMeaning: "Vành rổ",
                word: "hoop",
                pronunciation: "/huːp/",
                exampleStory: "The ball sailed through the air and went right through the hoop!.",
                exampleCommon: "Vành, vòng (đặc biệt là trong bóng rổ hoặc thể dục nhịp điệu)."
            },
            {
                vietnameseMeaning: "Sự không may, rủi ro",
                word: "misfortune",
                pronunciation: "/ˌmɪsˈfɔːrtʃuːn/",
                exampleStory: "She couldn’t believe her misfortune.",
                exampleCommon: "Sự không may, vận rủi, tai họa."
            },
            {
                vietnameseMeaning: "Tiêu cực",
                word: "negative",
                pronunciation: "/ˈneɡətɪv/",
                exampleStory: "“I don’t want to hear any more negative comments from you.\".",
                exampleCommon: "Tiêu cực, phủ định, âm tính."
            },
            {
                vietnameseMeaning: "Mỗi",
                word: "per",
                pronunciation: "/pɜːr/",
                exampleStory: "There were six girls per team.",
                exampleCommon: "Mỗi, trên mỗi."
            },
            {
                vietnameseMeaning: "Cầu xin, van nài",
                word: "plead",
                pronunciation: "/pliːd/",
                exampleStory: "“I don’t know any of these girls! Let me play on another team. Please!” she pleaded.",
                exampleCommon: "Cầu xin, van nài, biện hộ (trước tòa)."
            },
            {
                vietnameseMeaning: "Xé rách",
                word: "rip",
                pronunciation: "/rɪp/",
                exampleStory: "She had ripped her jeans.",
                exampleCommon: "Xé, làm rách, rạch."
            },
            {
                vietnameseMeaning: "Vì lợi ích của",
                word: "sake",
                pronunciation: "/seɪk/",
                exampleStory: "“For the sake of the team, please try your best. I know you’re a good player,” said Stephanie.",
                exampleCommon: "Vì lợi ích của, vì mục đích (Thường dùng trong cụm \"for the sake of\")."
            },
            {
                vietnameseMeaning: "Làm trầy xước",
                word: "scrape",
                pronunciation: "/skreɪp/",
                exampleStory: "She had scraped her knee and had a small bruise.",
                exampleCommon: "Cạo, nạo, làm trầy xước."
            },
            {
                vietnameseMeaning: "Nguồn",
                word: "source",
                pronunciation: "/sɔːrs/",
                exampleStory: "She had made a lot of new friends, and they were a source of happiness for her for many years.",
                exampleCommon: "Nguồn, nguồn gốc."
            },
            {
                vietnameseMeaning: "Nghiêm khắc",
                word: "stern",
                pronunciation: "/stɜːrn/",
                exampleStory: "With a stern voice, the coach said, “No.\".",
                exampleCommon: "Nghiêm khắc, cứng rắn, nghiêm nghị."
            },
            {
                vietnameseMeaning: "Khâu",
                word: "stitch",
                pronunciation: "/stɪtʃ/",
                exampleStory: "Gwen told her teammates, “My knee is fine, and I can stitch my pants later. Let’s keep playing!\".",
                exampleCommon: "Khâu, may, khâu vết thương."
            },
            {
                vietnameseMeaning: "Tiếng va đập mạnh",
                word: "thump",
                pronunciation: "/θʌmp/",
                exampleStory: "Later, Gwen fell with a loud thump.",
                exampleCommon: "Tiếng va đập mạnh, tiếng đập (tim)."
            },
            {
                vietnameseMeaning: "Kịch liệt, mãnh liệt",
                word: "vehement",
                pronunciation: "/ˈviːəmənt/",
                exampleStory: "Gwen was vehement. “I don’t know any of these girls! Let me play on another team. Please!” she pleaded.",
                exampleCommon: "Mãnh liệt, kịch liệt, dữ dội (thường chỉ cảm xúc hoặc cách thể hiện)."
            }
        ];

        let currentCardIndex = 0;
        let isFlipped = false;
        let shuffledVocabulary = [...vocabulary]; // Tạo bản sao để trộn

        const flashcard = document.getElementById('flashcard');
        const flashcardFront = document.getElementById('flashcard-front');
        const flashcardBack = document.getElementById('flashcard-back');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const shuffleButton = document.getElementById('shuffle-button');
        const cardCounter = document.getElementById('card-counter');

        // Hàm hiển thị thẻ hiện tại
        function displayCard() {
            const cardData = shuffledVocabulary[currentCardIndex];

            // Cập nhật nội dung mặt trước
            flashcardFront.innerHTML = `
                <p>${cardData.vietnameseMeaning}</p>
            `;

            // Cập nhật nội dung mặt sau
            flashcardBack.innerHTML = `
                <p class="vocabulary">${cardData.word}</p>
                <p class="pronunciation">${cardData.pronunciation}</p>
                <p class="example"><b>Nghĩa trong câu chuyện:</b> ${cardData.exampleStory}</p>
                <p class="example"><b>Nghĩa thường gặp:</b> ${cardData.exampleCommon}</p>
            `;

            // Cập nhật bộ đếm thẻ
            cardCounter.textContent = `Thẻ ${currentCardIndex + 1} / ${shuffledVocabulary.length}`;

            // Đảm bảo thẻ ở trạng thái không lật khi chuyển thẻ
            if (isFlipped) {
                flashcard.classList.remove('flipped');
                isFlipped = false;
            }
        }

        // Hàm lật thẻ
        function flipCard() {
            flashcard.classList.toggle('flipped');
            isFlipped = !isFlipped;
        }

        // Hàm chuyển đến thẻ tiếp theo
        function nextCard() {
            currentCardIndex = (currentCardIndex + 1) % shuffledVocabulary.length;
            displayCard();
        }

        // Hàm chuyển đến thẻ trước đó
        function prevCard() {
            currentCardIndex = (currentCardIndex - 1 + shuffledVocabulary.length) % shuffledVocabulary.length;
            displayCard();
        }

        // Hàm trộn thẻ (thuật toán Fisher-Yates shuffle)
        function shuffleCards() {
            for (let i = shuffledVocabulary.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledVocabulary[i], shuffledVocabulary[j]] = [shuffledVocabulary[j], shuffledVocabulary[i]];
            }
            currentCardIndex = 0; // Reset về thẻ đầu tiên sau khi trộn
            displayCard();
        }

        // Xử lý sự kiện click vào thẻ để lật
        flashcard.addEventListener('click', flipCard);

        // Xử lý sự kiện click vào nút điều hướng
        prevButton.addEventListener('click', prevCard);
        nextButton.addEventListener('click', nextCard);
        shuffleButton.addEventListener('click', shuffleCards);

        // Xử lý sự kiện bàn phím
        document.addEventListener('keydown', (event) => {
            if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {
                nextCard();
            } else if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
                prevCard();
            } else if (event.key === ' ') { // Phím cách
                event.preventDefault(); // Ngăn chặn cuộn trang khi nhấn phím cách
                flipCard();
            }
        });

        // Xử lý sự kiện vuốt trên điện thoại
        let touchStartX = 0;
        let touchEndX = 0;
        const minSwipeDistance = 50; // Khoảng cách vuốt tối thiểu để kích hoạt

        flashcard.addEventListener('touchstart', (event) => {
            touchStartX = event.touches[0].clientX;
        });

        flashcard.addEventListener('touchmove', (event) => {
            touchEndX = event.touches[0].clientX;
        });

        flashcard.addEventListener('touchend', () => {
            const distance = touchEndX - touchStartX;

            if (distance > minSwipeDistance) {
                // Vuốt sang phải (trước đó)
                prevCard();
            } else if (distance < -minSwipeDistance) {
                // Vuốt sang trái (tiếp theo)
                nextCard();
            }

            // Reset touch coordinates
            touchStartX = 0;
            touchEndX = 0;
        });

        // Khởi tạo hiển thị thẻ đầu tiên khi tải trang
        displayCard();
    </script>
</body>
</html>
